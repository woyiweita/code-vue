<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>源码JS编写运动效果</title>
	<style class="text/css">
	.imgbox{width:100%;height:200px;position:relative;border:1px solid #000;}
	.imgbox img{height:200px;width:auto;position:absolute;top:0;left:0;}
	</style>
</head>
<body>
	<div class="imgbox">
		<img id="itemimg" src="./images/xx.jpg"/>
	</div>
<script type="text/javascript">
	// 说明：该函数来自 JavaScript DOM 编程 2 第10章
	function moveElement(elementID,final_x,final_y,interval){
		if(!document.getElementById){return false;}
		if(!document.getElementById(elementID)){return false;}
		var elem = document.getElementById(elementID),
				xpos = parseInt(elem.style.left),
				ypos = parseInt(elem.style.top);
				
		if(xpos == final_x && ypos == final_y){
			return true;
		}
		if(xpos < final_x){
			++ xpos;
		}
		if(xpos > final_x){
			-- xpos;
		}
		if(ypos < final_y){
			++ ypos;
		}
		if(ypos > final_y){
			-- yos;
		}
		elem.style.left = xpos + 'px';
		elem.style.top = ypos + 'px';
		var rept = 'moveElement("' + elementID + '",' + final_x + ',' + final_y + ',' + interval + ')';
		setTimeout(rept,interval);
	}
	
	// 减速运动
	function decelerMoveElement(elementID,final_x,final_y,interval){
		
		// 是否支持DOM
		if(!document.getElementById){return false;}
		
		// 检查元素是否存在
		if(!document.getElementById(elementID)){return false;}
		var elem = document.getElementById(elementID);
		
		// 检查时候有未完成动画
		if(elem.moveTime){
			clearTimeout(elem.moveTime);
		}
		var x_pos = parseInt(elem.style.left);
		var y_pos = parseInt(elem.style.top);
		if(x_pos == final_x && y_pos == final_y){
			if(elem.moveTime){
				clearTimeout(elem.moveTime);
			}
			return true;
		}
		
		if(x_pos < final_x){
			x_pos = x_pos + Math.ceil((final_x - x_pos) / 10);
		}
		if(x_pos > final_x){
			x_pos = x_pos - Math.ceil((x_pos - final_x) / 10);
		}
		if(y_pos < final_y){
			y_pos = y_pos + Math((final_y - y_pos) / 10);
		}
		if(y_pos < final_y){
			y_pos = y_pos - Math((y_pos - final_y) / 10);
		}
		elem.style.top = y_pos + 'px';
		elem.style.left = x_pos + 'px';
		var rept = 'decelerMoveElement("' + elementID + '",' + final_x + ',' + final_y + ',' + interval + ')';
		elem.moveTime = setTimeout(rept,interval);
	}
	
	
	(function (elID){
		var element = document.getElementById(elID);
		element.style.top = 0 + 'px';
		element.style.left = 0 + 'px';
		//moveElement('itemimg',500,0,10);
		//moveElement(elID,500,0,10);
		decelerMoveElement(elID,500,0,20)
	})('itemimg');
</script>
</body>
</html>